{% extends "base.html" %}
{% block title %}Community Notices{% endblock %}

{% block content %}
<h2 style="color:#0d6efd; margin-bottom:1rem;">Latest Notices</h2>

{% if items %}
<div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:1rem;">
  {% for item in items %}
  <div style="background:#fff; border-radius:10px; overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,0.05); display:flex; flex-direction:column;">
    {% if item.image_filename %}
      <img src="{{ url_for('uploaded_file', filename=item.image_filename) }}"
           alt="{{ item.title }}"
           style="width:100%; height:200px; object-fit:cover;">
    {% endif %}
    <div style="padding:1rem; display:flex; flex-direction:column; flex:1;">
      <h3>{{ item.title }}</h3>
      {% if item.body %}
        <p style="white-space: pre-line; line-height:1.4; margin:.25rem 0 0;">{{ item.body }}</p>
      {% endif %}
      <div style="margin-top:.5rem; font-size:.85rem; color:#6c757d; display:flex; justify-content:space-between;">
        <span>Created by {{ item.creator_name or 'Unknown' }} on {{ item.created_at[:16].replace('T',' ') }}</span>
        {% if not item.is_published %}
        <span style="background:#ffc107; color:#000; padding:.2rem .5rem; border-radius:4px; font-size:.75rem;">Hidden</span>
        {% endif %}
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
  <p style="color:#6c757d;">No notices yet.</p>
{% endif %}
{% endblock %}
